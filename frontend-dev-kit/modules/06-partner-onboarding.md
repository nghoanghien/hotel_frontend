# Module 06: Partner Onboarding

## Screens

| Screen | Route | Mô tả |
|--------|-------|-------|
| Partner Landing | `/partner` | Giới thiệu chương trình partner |
| Pricing Plans | `/partner/pricing` | Chọn gói subscription |
| Registration | `/partner/register` | Form đăng ký chi tiết |
| Document Upload | `/partner/documents` | Upload giấy tờ |
| Review Status | `/partner/status` | Theo dõi trạng thái duyệt |

---

## Onboarding Flow

```
??????????????   ?????????????   ?????????????   ?????????????   ??????????????
?  Landing   ? ? ?  Pricing   ? ? ?   Basic    ? ? ?  Documents ? ? ?   Review   ?
?   Page     ?   ?   Plans    ?   ?    Info    ?   ?   Upload   ?   ?   Status   ?
??????????????   ?????????????   ?????????????   ?????????????   ??????????????
```

---

## Subscription Plans

| Feature | Basic | Professional | Premium |
|---------|-------|--------------|---------|
| **Pricing** | | | |
| Monthly | 725,000 VND | 1,975,000 VND | 4,975,000 VND |
| Quarterly | 1,975,000 VND | 4,975,000 VND | 12,475,000 VND |
| Yearly | 7,250,000 VND | 19,750,000 VND | 49,750,000 VND |
| **Limits** | | | |
| Max Hotels | 1 | 3 | 999 |
| Max Rooms/Hotel | 20 | 100 | 999 |
| Max Users/Hotel | 3 | 10 | 999 |
| Commission Rate | 15% | 12% | 8% |

---

## API Endpoints

### 1. Get Subscription Plans
```http
GET /api/subscription-plans
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "Basic",
      "description": "Hoàn hảo cho các khách sạn nhỏ độc lập",
      "planType": "Basic",
      "monthlyPrice": 725000,
      "quarterlyPrice": 1975000,
      "yearlyPrice": 7250000,
      "currency": "VND",
      "maxHotels": 1,
      "maxRoomsPerHotel": 20,
      "maxUsersPerHotel": 3,
      "commissionRate": 15,
      "isPopular": false
    },
    {
      "id": "uuid",
      "name": "Professional",
      "description": "Lý tưởng cho các khách sạn đang phát triển",
      "planType": "Professional",
      "monthlyPrice": 1975000,
      "quarterlyPrice": 4975000,
      "yearlyPrice": 19750000,
      "currency": "VND",
      "maxHotels": 3,
      "maxRoomsPerHotel": 100,
      "maxUsersPerHotel": 10,
      "commissionRate": 12,
      "isPopular": true
    },
    {
      "id": "uuid",
      "name": "Premium",
      "description": "Dành cho các khách sạn lớn",
      "planType": "Premium",
      "monthlyPrice": 4975000,
      "quarterlyPrice": 12475000,
      "yearlyPrice": 49750000,
      "currency": "VND",
      "maxHotels": 999,
      "maxRoomsPerHotel": 999,
      "maxUsersPerHotel": 999,
      "commissionRate": 8,
      "isPopular": false
    }
  ]
}
```

---

### 2. Create Onboarding Application
```http
POST /api/hotel-onboarding
Authorization: Bearer {token}
```

**Request:**
```json
{
  "brandName": "Sunset Hotels",
  "brandDescription": "A collection of beachfront hotels",
  "brandLogoUrl": "https://...",
  "hotelName": "Sunset Beach Resort",
  "hotelDescription": "Luxury beachfront resort in Da Nang",
  "starRating": 5,
  "totalRooms": 120,
  "numberOfFloors": 10,
  "address": "123 Beach Road",
  "city": "Da Nang",
  "state": "",
  "country": "Vietnam",
  "postalCode": "550000",
  "latitude": 16.0544,
  "longitude": 108.2022,
  "contactName": "Nguyen Van A",
  "contactEmail": "contact@sunsethotels.com",
  "contactPhone": "+84-236-1234-567",
  "contactPosition": "General Manager",
  "legalBusinessName": "Sunset Hotels Vietnam Co., Ltd",
  "taxId": "0123456789",
  "businessRegistrationNumber": "BRN-2024-001",
  "selectedPlanId": "uuid",
  "selectedBillingCycle": "Monthly"
}
```

**Response (201):**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "status": "Draft",
    "message": "Application created. Please upload required documents."
  }
}
```

---

### 3. Update Onboarding Application
```http
PUT /api/hotel-onboarding/{id}
Authorization: Bearer {token}
```

---

### 4. Upload Onboarding Document
```http
POST /api/hotel-onboarding/{id}/documents
Authorization: Bearer {token}
Content-Type: multipart/form-data

file: [document file]
type: "BusinessLicense" | "TaxCertificate" | "OwnershipProof" | "BankStatement" | "Other"
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "type": "BusinessLicense",
    "fileName": "business_license.pdf",
    "fileUrl": "https://...",
    "status": "Pending"
  }
}
```

---

### 5. Submit Application for Review
```http
POST /api/hotel-onboarding/{id}/submit
Authorization: Bearer {token}
```

**Request:**
```json
{
  "acceptedTerms": true
}
```

**Response:**
```json
{
  "success": true,
  "message": "Application submitted successfully. We will review within 3-5 business days."
}
```

---

### 6. Get My Onboarding Status
```http
GET /api/hotel-onboarding/my-applications
Authorization: Bearer {token}
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "hotelName": "Sunset Beach Resort",
      "brandName": "Sunset Hotels",
      "status": "UnderReview",
      "submittedAt": "2024-01-15T10:00:00Z",
      "reviewNotes": null,
      "documents": [
        {
          "type": "BusinessLicense",
          "status": "Approved"
        },
        {
          "type": "TaxCertificate",
          "status": "Pending"
        }
      ]
    }
  ]
}
```

---

## Screen Specifications

### Pricing Plans Screen
```
????????????????????????????????????????????????????????????????????????
?                    Choose Your Plan                                  ?
?                                                                      ?
?  [Monthly] [Quarterly -10%] [Yearly -20%]                            ?
?                                                                      ?
?  ???????????????????? ???????????????????? ????????????????????     ?
?  ?     Basic        ? ?   Professional   ? ?    Premium        ?     ?
?  ?                  ? ?   ? POPULAR     ? ?                  ?     ?
?  ?   725k VND/mo    ? ?  1,975k VND/mo   ? ?  4,975k VND/mo   ?     ?
?  ?                  ? ?                  ? ?                  ?     ?
?  ?  ? 1 Hotel       ? ?  ? 3 Hotels      ? ?  ? Unlimited     ?     ?
?  ?  ? 20 Rooms      ? ?  ? 100 Rooms     ? ?  ? Unlimited     ?     ?
?  ?  ? 3 Users       ? ?  ? 10 Users      ? ?  ? Unlimited     ?     ?
?  ?  15% commission  ? ?  12% commission  ? ?  8% commission   ?     ?
?  ?                  ? ?                  ? ?                  ?     ?
?  ?  [Select Plan]   ? ?  [Select Plan]   ? ?  [Select Plan]   ?     ?
?  ???????????????????? ???????????????????? ????????????????????     ?
????????????????????????????????????????????????????????????????????????
```

### Registration Form Screen
```
????????????????????????????????????????????????????
?  ? Back        Partner Registration              ?
????????????????????????????????????????????????????
?  Step 1 of 4: Brand & Hotel Information          ?
?  ????????????????????????????????????           ?
?                                                  ?
?  ??? Brand Information ????????????????????????  ?
?  ?????????????????????????????????????????????? ?
?  ? Brand Name *                               ? ?
?  ? Sunset Hotels                              ? ?
?  ?????????????????????????????????????????????? ?
?  ?????????????????????????????????????????????? ?
?  ? Brand Description                          ? ?
?  ? A collection of beachfront hotels...       ? ?
?  ?????????????????????????????????????????????? ?
?  ?????????????????????????????????????????????? ?
?  ? ??? Upload Logo                            ? ?
?  ?????????????????????????????????????????????? ?
?                                                  ?
?  ??? Hotel Information ????????????????????????  ?
?  ?????????????????????????????????????????????? ?
?  ? Hotel Name *                               ? ?
?  ? Sunset Beach Resort                        ? ?
?  ?????????????????????????????????????????????? ?
?  ?????????????????????????????????????????????? ?
?  ? ??? Upload Logo                            ? ?
?  ?????????????????????????????????????????????? ?
?  ?????????????????????????????????????????????? ?
?  ? Star Rating *    ? ? Total Rooms *        ?  ?
?  ? ?????         ? ? 120                  ?  ?
?  ?????????????????????????????????????????????? ?
?                                                  ?
?  ??? Address ??????????????????????????????????  ?
?  [Address fields...]                            ?
?                                                  ?
?  ?????????????????????????????????????????????? ?
?  ?              Continue ?                    ? ?
?  ?????????????????????????????????????????????? ?
????????????????????????????????????????????????????
```

### Document Upload Screen
```
????????????????????????????????????????????????????
?  ? Back        Required Documents                ?
????????????????????????????????????????????????????
?  Step 3 of 4: Upload Documents                   ?
?  ??????????????????????????????????????         ?
?                                                  ?
?  Please upload the following documents:          ?
?                                                  ?
?  ?????????????????????????????????????????????? ?
?  ? ?? Business License *              Required ? ?
?  ?    ????????????????????????????????????    ? ?
?  ?    ? ?? business_license.pdf     ?   ?    ? ?
?  ?    ?    Uploaded - 2.3 MB             ?    ? ?
?  ?    ????????????????????????????????????    ? ?
?  ?????????????????????????????????????????????? ?
?                                                  ?
?  ?????????????????????????????????????????????? ?
?  ? ?? Tax Certificate *               Required ? ?
?  ?    ????????????????????????????????????    ? ?
?  ?    ?  + Upload Document               ?    ? ?
?  ?    ????????????????????????????????????    ? ?
?  ?????????????????????????????????????????????? ?
?                                                  ?
?  ?????????????????????????????????????????????? ?
?  ? ?? Ownership Proof                Optional ? ?
?  ?    ????????????????????????????????????    ? ?
?  ?    ?  + Upload Document               ?    ? ?
?  ?    ????????????????????????????????????    ? ?
?  ?????????????????????????????????????????????? ?
?                                                  ?
?  Accepted formats: PDF, JPG, PNG (max 10MB)      ?
?                                                  ?
?  ?????????????????????????????????????????????? ?
?  ?              Continue ?                    ? ?
?  ?????????????????????????????????????????????? ?
????????????????????????????????????????????????????
```

### Application Status Screen
```
????????????????????????????????????????????????????
?  ? Back        Application Status                ?
????????????????????????????????????????????????????
?                                                  ?
?           ?? Under Review                        ?
?                                                  ?
?  Your application is being reviewed by our team. ?
?  This usually takes 3-5 business days.           ?
?                                                  ?
?  Submitted: Jan 15, 2024                         ?
?                                                  ?
????????????????????????????????????????????????????
?  Application Details                             ?
?                                                  ?
?  Hotel: Sunset Beach Resort                      ?
?  Brand: Sunset Hotels                            ?
?  Plan: Professional (1,975,000 VND/mo)           ?
?                                                  ?
????????????????????????????????????????????????????
?  Document Status                                 ?
?                                                  ?
?  ? Business License         Approved            ?
?  ?? Tax Certificate          Under Review        ?
?  ? Ownership Proof          Pending             ?
?                                                  ?
????????????????????????????????????????????????????
?  Need help? Contact partner@hotelsaas.com        ?
????????????????????????????????????????????????????
```

---

## TypeScript Types

```typescript
interface SubscriptionPlanDto {
  id: string;
  name: string;
  description?: string;
  planType: SubscriptionPlanType;
  monthlyPrice: number;
  quarterlyPrice: number;
  yearlyPrice: number;
  currency: string;
  maxHotels: number;
  maxRoomsPerHotel: number;
  maxUsersPerHotel: number;
  commissionRate: number;
  isPopular: boolean;
}

enum SubscriptionPlanType {
  Basic = 0,
  Professional = 1,
  Premium = 2
}

enum BillingCycle {
  Monthly = 0,
  Quarterly = 1,
  Yearly = 2
}

// Onboarding
interface CreateOnboardingRequest {
  brandName: string;
  brandDescription?: string;
  brandLogoUrl?: string;
  hotelName: string;
  hotelDescription?: string;
  starRating: number;
  totalRooms: number;
  numberOfFloors?: number;
  address: string;
  city: string;
  state?: string;
  country: string;
  postalCode?: string;
  latitude?: number;
  longitude?: number;
  contactName: string;
  contactEmail: string;
  contactPhone: string;
  contactPosition?: string;
  legalBusinessName: string;
  taxId?: string;
  businessRegistrationNumber?: string;
  selectedPlanId?: string;
  selectedBillingCycle: BillingCycle;
}

interface OnboardingDto {
  id: string;
  status: OnboardingStatus;
  brandName: string;
  hotelName: string;
  starRating: number;
  totalRooms: number;
  address: string;
  city: string;
  country: string;
  contactName: string;
  contactEmail: string;
  selectedPlan?: SubscriptionPlanDto;
  selectedBillingCycle: BillingCycle;
  documents: OnboardingDocumentDto[];
  submittedAt?: string;
  reviewedAt?: string;
  rejectionReason?: string;
  createdAt: string;
}

enum OnboardingStatus {
  Draft = 0,
  PendingDocuments = 1,
  UnderReview = 2,
  Approved = 3,
  Rejected = 4,
  RequiresChanges = 5
}

interface OnboardingDocumentDto {
  id: string;
  type: DocumentType;
  fileName: string;
  fileUrl: string;
  status: DocumentStatus;
  reviewNotes?: string;
}

enum DocumentType {
  BusinessLicense = 0,
  TaxCertificate = 1,
  OwnershipProof = 2,
  BankStatement = 3,
  InsuranceCertificate = 4,
  Other = 5
}

enum DocumentStatus {
  Pending = 0,
  Approved = 1,
  Rejected = 2
}
```

---

## Notes

- Backend tự động kiểm tra giới hạn subscription khi duyệt onboarding
- Nếu vượt limit, SuperAdmin sẽ được thông báo
